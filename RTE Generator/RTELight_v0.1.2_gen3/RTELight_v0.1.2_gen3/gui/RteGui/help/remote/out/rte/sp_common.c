

/*
 * Filename: sp_common.c
 *
 * Author: Autogenerated by H-DA RTE Generator, (c) Prof. Fromm
 */

#include "project.h"
#include "global.h"
#include "rte.h"
#include "rte_types.h"
#include "sp_common.h"



/* USER CODE START SP_COMMON_INCLUDE */

/* USER CODE END SP_COMMON_INCLUDE */

#include "sc_protocol.h"
#include "sc_protocol_type.h"
#include "sc_protocol.h"
#include "sc_protocol_type.h"
#include "sc_joystick.h"
#include "sc_joystick_type.h"
#include "sc_button.h"
#include "sc_button_type.h"
#include "sc_display.h"
#include "sc_display_type.h"
#include "sc_connectionstate.h"
#include "sc_connectionstate_type.h"
#include "sc_event.h"
#include "sc_event_type.h"
#include "sc_event.h"
#include "sc_event_type.h"
#include "sc_event.h"
#include "sc_event_type.h"



/* signal configuration */
/*
* description: Data received over XBee
* indriver: default
* name: so_protocolRx
* onDataError: ev_protocolrx_onError
* onDataUpdate: 0
* outdriver: 0
* resource: None
* shortname: protocolRx
* signalclass: sc_Protocol
* signalpool: sp_common
*/

 
/* The following array contains the receiving tasks for onError signal events */
const TaskTypeArray so_protocolRx_errTasks = { tsk_com };


static const SC_PROTOCOL_cfg_t SO_PROTOCOLRX_cfg = 
{
   /* indriver           */  SC_PROTOCOL_driverIn,
   /* outdriver          */  0,

   /* onUpdate           */  0,
   /* onError            */  ev_protocolrx_onError,
   /* taskCount onUpdate */  0,
   /* task list onUpdate */  NULL,
   /* taskCount onError  */  1,
   /* task list onError  */  &so_protocolRx_errTasks,

   /* resource active    */  FALSE,
   /* resource           */  NULL,
   
}; /* configuration so_protocolrx */


/* signal data */

SC_PROTOCOL_t SO_PROTOCOLRX_signal= 
{
   /* init value    */  SC_PROTOCOL_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_PROTOCOLRX_cfg,
}; /* data so_protocolrx */

/* signal configuration */
/*
* description: Protocol send over XBEE
* indriver: 0
* name: so_protocolTx
* onDataError: 0
* onDataUpdate: 0
* outdriver: default
* resource: None
* shortname: protocolTx
* signalclass: sc_Protocol
* signalpool: sp_common
*/

 

static const SC_PROTOCOL_cfg_t SO_PROTOCOLTX_cfg = 
{
   /* indriver           */  0,
   /* outdriver          */  SC_PROTOCOL_driverOut,

   /* onUpdate           */  0,
   /* onError            */  0,
   /* taskCount onUpdate */  0,
   /* task list onUpdate */  NULL,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  FALSE,
   /* resource           */  NULL,
   
}; /* configuration so_protocoltx */


/* signal data */

SC_PROTOCOL_t SO_PROTOCOLTX_signal= 
{
   /* init value    */  SC_PROTOCOL_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_PROTOCOLTX_cfg,
}; /* data so_protocoltx */

/* signal configuration */
/*
* description: Signal representing all analogue SIgnals of the HMI
* indriver: default
* name: so_joystick
* onDataError: 0
* onDataUpdate: 0
* outdriver: 0
* resource: None
* shortname: joystick
* signalclass: sc_Joystick
* signalpool: sp_common
*/

 

static const SC_JOYSTICK_cfg_t SO_JOYSTICK_cfg = 
{
   /* indriver           */  SC_JOYSTICK_driverIn,
   /* outdriver          */  0,

   /* onUpdate           */  0,
   /* onError            */  0,
   /* taskCount onUpdate */  0,
   /* task list onUpdate */  NULL,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  FALSE,
   /* resource           */  NULL,
   
}; /* configuration so_joystick */


/* signal data */

SC_JOYSTICK_t SO_JOYSTICK_signal= 
{
   /* init value    */  SC_JOYSTICK_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_JOYSTICK_cfg,
}; /* data so_joystick */

/* signal configuration */
/*
* description: Button representation
* indriver: default
* name: so_button
* onDataError: 0
* onDataUpdate: 0
* outdriver: 0
* resource: None
* shortname: button
* signalclass: sc_Button
* signalpool: sp_common
*/

 

static const SC_BUTTON_cfg_t SO_BUTTON_cfg = 
{
   /* indriver           */  SC_BUTTON_driverIn,
   /* outdriver          */  0,

   /* onUpdate           */  0,
   /* onError            */  0,
   /* taskCount onUpdate */  0,
   /* task list onUpdate */  NULL,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  FALSE,
   /* resource           */  NULL,
   
}; /* configuration so_button */


/* signal data */

SC_BUTTON_t SO_BUTTON_signal= 
{
   /* init value    */  SC_BUTTON_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_BUTTON_cfg,
}; /* data so_button */

/* signal configuration */
/*
* description: Display representation
* indriver: 0
* name: so_display
* onDataError: 0
* onDataUpdate: ev_display_onData
* outdriver: default
* resource: res_display_Lock
* shortname: display
* signalclass: sc_Display
* signalpool: sp_common
*/


/* The following array contains the receiving tasks for onUpdate signal events */
const TaskTypeArray so_display_updTasks = { tsk_tft };
 

static const SC_DISPLAY_cfg_t SO_DISPLAY_cfg = 
{
   /* indriver           */  0,
   /* outdriver          */  SC_DISPLAY_driverOut,

   /* onUpdate           */  ev_display_onData,
   /* onError            */  0,
   /* taskCount onUpdate */  1,
   /* task list onUpdate */  &so_display_updTasks,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  TRUE,
   /* resource           */  res_display_Lock,
   
}; /* configuration so_display */


/* signal data */

SC_DISPLAY_t SO_DISPLAY_signal= 
{
   /* init value    */  SC_DISPLAY_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_DISPLAY_cfg,
}; /* data so_display */

/* signal configuration */
/*
* description: Connection State of the remote - must be in sync with the car
* indriver: 0
* name: so_connectionstate
* onDataError: 0
* onDataUpdate: 0
* outdriver: 0
* resource: None
* shortname: connectionstate
* signalclass: sc_ConnectionState
* signalpool: sp_common
*/

 

static const SC_CONNECTIONSTATE_cfg_t SO_CONNECTIONSTATE_cfg = 
{
   /* indriver           */  0,
   /* outdriver          */  0,

   /* onUpdate           */  0,
   /* onError            */  0,
   /* taskCount onUpdate */  0,
   /* task list onUpdate */  NULL,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  FALSE,
   /* resource           */  NULL,
   
}; /* configuration so_connectionstate */


/* signal data */

SC_CONNECTIONSTATE_t SO_CONNECTIONSTATE_signal= 
{
   /* init value    */  SC_CONNECTIONSTATE_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_CONNECTIONSTATE_cfg,
}; /* data so_connectionstate */

/* signal configuration */
/*
* description: Event fired from remote to central state machine
* indriver: 0
* name: so_event_rx_remote
* onDataError: 0
* onDataUpdate: ev_event_rx_remote_onData
* outdriver: 0
* resource: res_event_rx_Lock
* shortname: event_rx_remote
* signalclass: sc_Event
* signalpool: sp_common
*/


/* The following array contains the receiving tasks for onUpdate signal events */
const TaskTypeArray so_event_rx_remote_updTasks = { tsk_control };
 

static const SC_EVENT_cfg_t SO_EVENT_RX_REMOTE_cfg = 
{
   /* indriver           */  0,
   /* outdriver          */  0,

   /* onUpdate           */  ev_event_rx_remote_onData,
   /* onError            */  0,
   /* taskCount onUpdate */  1,
   /* task list onUpdate */  &so_event_rx_remote_updTasks,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  TRUE,
   /* resource           */  res_event_rx_Lock,
   
}; /* configuration so_event_rx_remote */


/* signal data */

SC_EVENT_t SO_EVENT_RX_REMOTE_signal= 
{
   /* init value    */  SC_EVENT_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_EVENT_RX_REMOTE_cfg,
}; /* data so_event_rx_remote */

/* signal configuration */
/*
* description: Event fired from the central state machine
* indriver: 0
* name: so_event_tx
* onDataError: 0
* onDataUpdate: ev_event_tx_onData
* outdriver: 0
* resource: None
* shortname: event_tx
* signalclass: sc_Event
* signalpool: sp_common
*/


/* The following array contains the receiving tasks for onUpdate signal events */
const TaskTypeArray so_event_tx_updTasks = { tsk_com };
 

static const SC_EVENT_cfg_t SO_EVENT_TX_cfg = 
{
   /* indriver           */  0,
   /* outdriver          */  0,

   /* onUpdate           */  ev_event_tx_onData,
   /* onError            */  0,
   /* taskCount onUpdate */  1,
   /* task list onUpdate */  &so_event_tx_updTasks,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  FALSE,
   /* resource           */  NULL,
   
}; /* configuration so_event_tx */


/* signal data */

SC_EVENT_t SO_EVENT_TX_signal= 
{
   /* init value    */  SC_EVENT_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_EVENT_TX_cfg,
}; /* data so_event_tx */

/* signal configuration */
/*
* description: Event fired from hmi to central state machine
* indriver: 0
* name: so_event_rx_hmi
* onDataError: 0
* onDataUpdate: ev_event_rx_hmi_onData
* outdriver: 0
* resource: res_event_rx_Lock
* shortname: event_rx_hmi
* signalclass: sc_Event
* signalpool: sp_common
*/


/* The following array contains the receiving tasks for onUpdate signal events */
const TaskTypeArray so_event_rx_hmi_updTasks = { tsk_control };
 

static const SC_EVENT_cfg_t SO_EVENT_RX_HMI_cfg = 
{
   /* indriver           */  0,
   /* outdriver          */  0,

   /* onUpdate           */  ev_event_rx_hmi_onData,
   /* onError            */  0,
   /* taskCount onUpdate */  1,
   /* task list onUpdate */  &so_event_rx_hmi_updTasks,
   /* taskCount onError  */  0,
   /* task list onError  */  NULL,

   /* resource active    */  TRUE,
   /* resource           */  res_event_rx_Lock,
   
}; /* configuration so_event_rx_hmi */


/* signal data */

SC_EVENT_t SO_EVENT_RX_HMI_signal= 
{
   /* init value    */  SC_EVENT_INIT_DATA,
   /* status        */  RTE_SIGNALSTATUS_STARTUP,
   /* age           */  0,
   /* cfg           */  &SO_EVENT_RX_HMI_cfg,
}; /* data so_event_rx_hmi */



void RTE_timertick_sp_common_tick(uint32_t tick){
   RTE_SC_PROTOCOL_incAge( &SO_PROTOCOLRX_signal, tick); 
   RTE_SC_PROTOCOL_incAge( &SO_PROTOCOLTX_signal, tick); 
   RTE_SC_JOYSTICK_incAge( &SO_JOYSTICK_signal, tick); 
   RTE_SC_BUTTON_incAge( &SO_BUTTON_signal, tick); 
   RTE_SC_DISPLAY_incAge( &SO_DISPLAY_signal, tick); 
   RTE_SC_CONNECTIONSTATE_incAge( &SO_CONNECTIONSTATE_signal, tick); 
   RTE_SC_EVENT_incAge( &SO_EVENT_RX_REMOTE_signal, tick); 
   RTE_SC_EVENT_incAge( &SO_EVENT_TX_signal, tick); 
   RTE_SC_EVENT_incAge( &SO_EVENT_RX_HMI_signal, tick); 
   
}


