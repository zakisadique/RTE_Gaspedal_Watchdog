

/*
 * Filename: tsk_com.c
 *
 * Author: Autogenerated by H-DA RTE Generator, (c) Prof. Fromm
 */

#include "project.h"
#include "global.h"
#include "rte.h"
#include "rte_types.h"
#include "tsk_com.h"



/* USER CODE START TSK_COM_INCLUDE */

/* USER CODE END TSK_COM_INCLUDE */

#include "swc_remote.h"



/* USER CODE START TSK_COM_USERDEFINITIONS */

/* USER CODE END TSK_COM_USERDEFINITIONS */

/*******************************************************************************
 * Runnable Tables from Activation Engine
 *******************************************************************************/

/* Event Table */
const RTE_eventTable_t RTE_eventActivationTable_tsk_com[] = {
    { REMOTE_readProtocol_run, ev_isr_protocolBufferComplete },  //Read protocol from XBEE
    { REMOTE_sendProtocol_run, ev_event_tx_onData },  //Send protocol trhough XBEE
    { REMOTE_readProtocolError_run, ev_protocolrx_onError },  //Error Handler for transmission errors
}; 
const uint16_t RTE_eventActivation_tsk_com_size = sizeof (RTE_eventActivationTable_tsk_com) / sizeof(RTE_eventTable_t);

/*******************************************************************************
 * Task Body
 *******************************************************************************/


/*
* description: Communication task, processing the UART
* events: ev_protocolrx_onError|ev_isr_protocolBufferComplete|ev_event_tx_onData
* mode: Event
* name: tsk_com
* shortname: com
* signalpoolsRO: 
* signalpoolsRW: sp_common
* tickEvent: 0
* timertickperiod: 0
*/
TASK(tsk_com)
{
    EventMaskType ev = 0;
    
    while(1)
    {
        //Wait, read and clear the event
        WaitEvent(ev_protocolrx_onError|ev_isr_protocolBufferComplete|ev_event_tx_onData);
        GetEvent(tsk_com,&ev);
        ClearEvent(ev);
		
		/* USER CODE START TSK_COM_TASKBOBY_PRE */

		/* USER CODE END TSK_COM_TASKBODY_PRE */
    

        //Process Event table on event
        RTE_ProcessEventTable(RTE_eventActivationTable_tsk_com, RTE_eventActivation_tsk_com_size, ev);
		
		/* USER CODE START TSK_COM_TASKBODY_POST */

		/* USER CODE END TSK_COM_TASKBODY_POST */

        
    }
}


/*******************************************************************************
 * Interrupt Service Routines
 *******************************************************************************/

/* USER CODE START TSK_COM_ISR */

/* USER CODE END TSK_COM_ISR */

